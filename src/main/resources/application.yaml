server:
  port: 8080

spring:
  application:
    name: book-embedding-worker

  datasource:
    url: ${POSTGRESQL_URL}
    username: ${POSTGRESQL_USERNAME}
    password: ${POSTGRESQL_PASSWORD}
    driver-class-name: org.postgresql.Driver

    hikari:
      maximum-pool-size: 2
      minimum-idle: 0
      max-lifetime: 540000     # 9분
      idle-timeout: 120000     # 2분
      connection-timeout: 30000
      validation-timeout: 5000
      keepalive-time: 0

  ssl:
    bundle:
      pem:
        opensearch:
          truststore:
            certificate: ${OPENSEARCH_CERT_PATH}

  ai:
    vectorstore:
      opensearch:
        uris: ${OPENSEARCH_URIS}
        username: ${OPENSEARCH_USERNAME}
        password: ${OPENSEARCH_PASSWORD}
        ssl-bundle: opensearch
        index-name: book-embedding-index
        initialize-schema: true
        similarity-function: cosinesimil
        use-approximate-knn: true
        dimensions: 768
        read-timeout: 5000
        connect-timeout: 60000