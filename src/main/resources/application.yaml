server:
  port: 8080

spring:
  application:
    name: book-embedding-worker

  datasource:
    url: ${POSTGRESQL_URL}
    username: ${POSTGRESQL_USERNAME}
    password: ${POSTGRESQL_PASSWORD}
    driver-class-name: org.postgresql.Driver

    hikari:
      maximum-pool-size: 2
      max-lifetime: 1700000   # 28 ~ 29ë¶„
      keepalive-time: 0

  ssl:
    bundle:
      pem:
        opensearch:
          truststore:
            certificate: ${OPENSEARCH_CERT_PATH}

  ai:
    vertex:
      ai:
        embedding:
          project-id: ${GCP_PROJECT_ID}
          location: us-central1
    vectorstore:
      opensearch:
        uris: ${OPENSEARCH_URIS}
        username: ${OPENSEARCH_USERNAME}
        password: ${OPENSEARCH_PASSWORD}
        ssl-bundle: opensearch
        index-name: book-embedding-index
        initialize-schema: true
        similarity-function: cosinesimil
        use-approximate-knn: true
        dimensions: 768
        read-timeout: 5000
        connect-timeout: 60000

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
        exclude: env, heapdump,beans,loggers
      base-path: /internal
  endpoint:
    health:
      show-details: never
    prometheus:
      access: read_only
  metrics:
    tags:
      application: ${spring.application.name}